<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="David">
<meta name="dcterms.date" content="2026-02-20">
<meta name="description" content="Dataset of the Week 3">

<title>Dataset of the Week #3: Winter Olympics Data – My Data Stories</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-4d9afe2b8d18ee9fa5d0d57b5ed4214d.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-b153582a94ddcde5434ef53ba0c3cd28.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">My Data Stories</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/davidgarmal/comm3180_S26_Blog"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Dataset of the Week #3: Winter Olympics Data</h1>
                  <div>
        <div class="description">
          Dataset of the Week 3
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">DOW</div>
                <div class="quarto-category">olympics</div>
                <div class="quarto-category">sports</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>David </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 20, 2026</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="the-timeline-of-a-winter-olympic-athlete" class="level1">
<h1>The timeline of a winter olympic athlete</h1>
<p>The winter olympics are a collection of athletic events that are held once every four years. This year, the winter olympics are being hosted in Milano and Cortina, Italy. Since the first Winter Olympics in 1924, thousands of athletes have competed in a multitude of disciplines. Some of them might have also had an olympic career. What can we say about the success stories of people who competed in multiple olympic games?</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/winterpodium.jpg" class="img-fluid figure-img"></p>
<figcaption>By Eileen - originally posted to Flickr as I can’t believe I was here…., CC BY 2.0, https://commons.wikimedia.org/w/index.php?curid=9528796</figcaption>
</figure>
</div>
<section id="repeating-athletes" class="level2">
<h2 class="anchored" data-anchor-id="repeating-athletes">Repeating Athletes</h2>
<p>For a lot of athletes, the olympic games represent the peak of their athletic career. Nevertheless, some of them might have started competing at such a young age that they’re able to participate in multiple instances of the olympic games. We can take look at a database of the winter olympics to find out which athletes have participated in more than one event.</p>
<div id="25a4430c-3d18-4f97-a9f1-a09bb6a9340f" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set Up</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Data</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>wolympics_df <span class="op">=</span> pd.read_csv(<span class="st">'data/winter_olympics_medals.csv'</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample row</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>wolympics_df.sample(<span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">discipline</th>
<th data-quarto-table-cell-role="th">event</th>
<th data-quarto-table-cell-role="th">as</th>
<th data-quarto-table-cell-role="th">athlete_id</th>
<th data-quarto-table-cell-role="th">noc</th>
<th data-quarto-table-cell-role="th">team</th>
<th data-quarto-table-cell-role="th">place</th>
<th data-quarto-table-cell-role="th">tied</th>
<th data-quarto-table-cell-role="th">medal</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">39576</th>
<td>2002.0</td>
<td>Winter</td>
<td>Ice Hockey (Ice Hockey)</td>
<td>Ice Hockey, Men (Olympic)</td>
<td>Mathias Seger</td>
<td>102297</td>
<td>SUI</td>
<td>Switzerland</td>
<td>11.0</td>
<td>False</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>As we see, the database contains some of the important information regarding athlete’s participation in the olympic games. Then, we can use the athlete id to find out which athletes have competed in more than one event.</p>
<div id="8cf1fa94-af2c-4539-a405-0d9c58b64aee" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select athletes who have participated in more than one event</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>multiple_event_ath <span class="op">=</span> wolympics_df.value_counts(<span class="st">'athlete_id'</span>).to_frame().query(<span class="st">'count&gt;1'</span>).reset_index()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter database to leave only athletes who have competed multiple events</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>filtered_olympics <span class="op">=</span> wolympics_df[</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    wolympics_df[<span class="st">'athlete_id'</span>].isin(multiple_event_ath[<span class="st">'athlete_id'</span>])</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Show a few columns of the filtered data</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>filtered_olympics.head(<span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">discipline</th>
<th data-quarto-table-cell-role="th">event</th>
<th data-quarto-table-cell-role="th">as</th>
<th data-quarto-table-cell-role="th">athlete_id</th>
<th data-quarto-table-cell-role="th">noc</th>
<th data-quarto-table-cell-role="th">team</th>
<th data-quarto-table-cell-role="th">place</th>
<th data-quarto-table-cell-role="th">tied</th>
<th data-quarto-table-cell-role="th">medal</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>1924.0</td>
<td>Winter</td>
<td>Bobsleigh (Bobsleigh)</td>
<td>Four/Five, Men (Olympic)</td>
<td>Charley Stoffel</td>
<td>12796</td>
<td>SUI</td>
<td>Switzerland 2</td>
<td>NaN</td>
<td>False</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>1928.0</td>
<td>Winter</td>
<td>Bobsleigh (Bobsleigh)</td>
<td>Four/Five, Men (Olympic)</td>
<td>Charley Stoffel</td>
<td>12796</td>
<td>SUI</td>
<td>Switzerland 1</td>
<td>8.0</td>
<td>False</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">5</th>
<td>2002.0</td>
<td>Winter</td>
<td>Speed Skating (Skating)</td>
<td>3,000 metres, Women (Olympic)</td>
<td>Clara Hughes</td>
<td>13139</td>
<td>CAN</td>
<td>NaN</td>
<td>10.0</td>
<td>False</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">6</th>
<td>2002.0</td>
<td>Winter</td>
<td>Speed Skating (Skating)</td>
<td>5,000 metres, Women (Olympic)</td>
<td>Clara Hughes</td>
<td>13139</td>
<td>CAN</td>
<td>NaN</td>
<td>3.0</td>
<td>False</td>
<td>Bronze</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">7</th>
<td>2006.0</td>
<td>Winter</td>
<td>Speed Skating (Skating)</td>
<td>3,000 metres, Women (Olympic)</td>
<td>Clara Hughes</td>
<td>13139</td>
<td>CAN</td>
<td>NaN</td>
<td>9.0</td>
<td>False</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">8</th>
<td>2006.0</td>
<td>Winter</td>
<td>Speed Skating (Skating)</td>
<td>5,000 metres, Women (Olympic)</td>
<td>Clara Hughes</td>
<td>13139</td>
<td>CAN</td>
<td>NaN</td>
<td>1.0</td>
<td>False</td>
<td>Gold</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">9</th>
<td>2006.0</td>
<td>Winter</td>
<td>Speed Skating (Skating)</td>
<td>Team Pursuit (6 laps), Women (Olympic)</td>
<td>Clara Hughes</td>
<td>13139</td>
<td>CAN</td>
<td>Canada</td>
<td>2.0</td>
<td>False</td>
<td>Silver</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">10</th>
<td>2010.0</td>
<td>Winter</td>
<td>Speed Skating (Skating)</td>
<td>3,000 metres, Women (Olympic)</td>
<td>Clara Hughes</td>
<td>13139</td>
<td>CAN</td>
<td>NaN</td>
<td>5.0</td>
<td>False</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">11</th>
<td>2010.0</td>
<td>Winter</td>
<td>Speed Skating (Skating)</td>
<td>5,000 metres, Women (Olympic)</td>
<td>Clara Hughes</td>
<td>13139</td>
<td>CAN</td>
<td>NaN</td>
<td>3.0</td>
<td>False</td>
<td>Bronze</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">12</th>
<td>1924.0</td>
<td>Winter</td>
<td>Cross Country Skiing (Skiing)</td>
<td>18 kilometres, Men (Olympic)</td>
<td>Roberts Plūme</td>
<td>16155</td>
<td>LAT</td>
<td>NaN</td>
<td>NaN</td>
<td>False</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>From this filtered data, we see that Charley Stoffel participated in the Olympic Games of 1924 and 1928. On the other hand, Clara Hughes participated for 3 olympic games: 2002, 2006, and 2010. Nevertheless, there are 7 entries since she competed in multiple events during the same year. If we take her story as an example, we can see that she won a Bronze medal on her first games, a gold and silver medals on her second games, and a bronze medal on her last games. Does that mean that there is a point where her performance just wouldn’t improve?</p>
</section>
<section id="athletes-across-multiple-years" class="level2">
<h2 class="anchored" data-anchor-id="athletes-across-multiple-years">Athletes Across Multiple Years</h2>
<p>Since we are interested in the difference of performance between the same athlete across the years, we want to only showcase the athletes who competed in more than one year. Moreover, to be charitable with them, we might want to take their best performance at a year in case they participated in more than one event in a single year. In our example with Clara Hughes, she participated in two events in the Winter Olympics of 2002, but she placed 10th on one event and 3rd on the other.</p>
<div id="5d4606f8-a8a9-4493-b4fb-ba5fe6fb456c" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by athlete, name and year, then find the minimum (best) place</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>best_per_year <span class="op">=</span> filtered_olympics.groupby([<span class="st">'as'</span>, <span class="st">'athlete_id'</span>, <span class="st">'year'</span>])[<span class="st">'place'</span>].<span class="bu">min</span>().reset_index()</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up the Year and Place (converting 1924.0 to 1924)</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>best_per_year[<span class="st">'year'</span>] <span class="op">=</span> best_per_year[<span class="st">'year'</span>].astype(<span class="bu">int</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>best_per_year.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">as</th>
<th data-quarto-table-cell-role="th">athlete_id</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">place</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>A J Kitt</td>
<td>87997</td>
<td>1988</td>
<td>26.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>A J Kitt</td>
<td>87997</td>
<td>1992</td>
<td>9.0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>A J Kitt</td>
<td>87997</td>
<td>1994</td>
<td>17.0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>A J Kitt</td>
<td>87997</td>
<td>1998</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>A. J. Mleczko</td>
<td>100464</td>
<td>1998</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>With this new visualization we can see how people’s performance has fluctuated throughout the years. For A J Kitt, his peak performance was during his 2nd Winter Olympics. We see that he declined after that until he did not place on his last year. Looking at him specifically, A J Kitt was born in 1968 which means he was 20 for his first Winter Olympics and 32 for his last. Particularly, he was 24 years old for his peak olympic performance.</p>
<p>Surprisingly, some people have competed for up to 8 years, and at least 8 people have competed for at least 7 years.</p>
<div id="5eb9b75c-695d-4988-b0c0-998ac7f66b6e" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>best_per_year.groupby([<span class="st">'as'</span>, <span class="st">'athlete_id'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'games_count'</span>).sort_values(by<span class="op">=</span><span class="st">'games_count'</span>, ascending<span class="op">=</span><span class="va">False</span>).head(<span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">as</th>
<th data-quarto-table-cell-role="th">athlete_id</th>
<th data-quarto-table-cell-role="th">games_count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">9900</th>
<td>Noriaki Kasai</td>
<td>87815</td>
<td>8</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">2406</th>
<td>Claudia Pechstein</td>
<td>82053</td>
<td>8</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">11862</th>
<td>Simon Ammann</td>
<td>99870</td>
<td>7</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">11790</th>
<td>Siarhei Dalidovich</td>
<td>85250</td>
<td>7</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">5608</th>
<td>Janne Ahonen</td>
<td>83500</td>
<td>7</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">172</th>
<td>Albert Demchenko</td>
<td>85156</td>
<td>7</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">846</th>
<td>Andrus Veerpalu</td>
<td>98596</td>
<td>6</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">6994</th>
<td>Kim Hyeon-Gi</td>
<td>99880</td>
<td>6</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">12533</th>
<td>Teemu Selänne</td>
<td>97424</td>
<td>6</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3582</th>
<td>Eva Tofalvi</td>
<td>99564</td>
<td>6</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>We can look at the athletes who have participated in 7 or more winter olympics to see what their performance has been like.</p>
<div id="90e2cf04-0cf1-41cb-a409-a2f5f2d2ba14" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify IDs of athletes who competed in 7 or more years</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>veteran_ids <span class="op">=</span> best_per_year.groupby(<span class="st">'athlete_id'</span>).size()</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>veteran_ids <span class="op">=</span> veteran_ids[veteran_ids <span class="op">&gt;=</span> <span class="dv">7</span>].index</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter the data and remove NaN places for the plot</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>plot_df <span class="op">=</span> best_per_year[best_per_year[<span class="st">'athlete_id'</span>].isin(veteran_ids)].dropna(subset<span class="op">=</span>[<span class="st">'place'</span>])</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Create the plot</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">7</span>))</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> athlete_id <span class="kw">in</span> plot_df[<span class="st">'athlete_id'</span>].unique():</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    subset <span class="op">=</span> plot_df[plot_df[<span class="st">'athlete_id'</span>] <span class="op">==</span> athlete_id]</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    athlete_name <span class="op">=</span> subset[<span class="st">'as'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    plt.plot(subset[<span class="st">'year'</span>], subset[<span class="st">'place'</span>], marker<span class="op">=</span><span class="st">'o'</span>, linewidth<span class="op">=</span><span class="dv">2</span>, label<span class="op">=</span>athlete_name)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Styling</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>plt.gca().invert_yaxis()  <span class="co"># Best results at the top</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Olympic Year'</span>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Best Place Achieved'</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Performance Trends of Athletes with 7+ Games'</span>)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">"Athletes"</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">1.05</span>, <span class="dv">1</span>), loc<span class="op">=</span><span class="st">'upper left'</span>)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="dow3_files/figure-html/cell-6-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Of the athletes who have competed in 7 or more games, we can see that all of them started competing later than 1992. A contributing factor to their number of participations might be that there were Winter Olympics held on 1992 and 1994 due to the schedule change to hold the Winter Olympics in different years that the summer Olympics. Out of these 6 athletes, we can see that Pechstein, Ahonen, and Demchenko had a relatively stable olympic career. Contrastingly, Kasai, Dalidovich, and Ammann had a more tumultuous olympic career. Investigating further into these 6 athletes can tell us more about their olympic career.</p>
<div id="34fc1988-57b0-424e-a0bc-48423ad7cb16" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load biographical data</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>bios <span class="op">=</span> pd.read_csv(<span class="st">'data/bios.csv'</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract data from the 6 athletes</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>bios.query(<span class="st">'athlete_id in @veteran_ids'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">athlete_id</th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">born_date</th>
<th data-quarto-table-cell-role="th">born_city</th>
<th data-quarto-table-cell-role="th">born_region</th>
<th data-quarto-table-cell-role="th">born_country</th>
<th data-quarto-table-cell-role="th">NOC</th>
<th data-quarto-table-cell-role="th">height_cm</th>
<th data-quarto-table-cell-role="th">weight_kg</th>
<th data-quarto-table-cell-role="th">died_date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">81401</th>
<td>82053</td>
<td>Claudia Pechstein</td>
<td>1972-02-22</td>
<td>Ost-Berlin (East Berlin)</td>
<td>Berlin</td>
<td>GER</td>
<td>Germany</td>
<td>166.0</td>
<td>61.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">82843</th>
<td>83500</td>
<td>Janne Ahonen</td>
<td>1977-05-11</td>
<td>Lahti</td>
<td>Päijät-Häme</td>
<td>FIN</td>
<td>Finland</td>
<td>184.0</td>
<td>66.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">84482</th>
<td>85156</td>
<td>Albert Demchenko</td>
<td>1971-11-27</td>
<td>Chusovoy</td>
<td>Perm Kray</td>
<td>RUS</td>
<td>Russian Federation Unified Team</td>
<td>185.0</td>
<td>95.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">84574</th>
<td>85250</td>
<td>Siarhei Dalidovich</td>
<td>1973-05-18</td>
<td>Orsha</td>
<td>Vitebsk</td>
<td>BLR</td>
<td>Belarus</td>
<td>175.0</td>
<td>68.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">87119</th>
<td>87815</td>
<td>Noriaki Kasai</td>
<td>1972-06-06</td>
<td>Shimokawa</td>
<td>Hokkaido</td>
<td>JPN</td>
<td>Japan</td>
<td>176.0</td>
<td>60.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">99074</th>
<td>99870</td>
<td>Simon Ammann</td>
<td>1981-06-25</td>
<td>Grabs</td>
<td>Sankt Gallen</td>
<td>SUI</td>
<td>Switzerland</td>
<td>171.0</td>
<td>55.0</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Surprisingly, all athletes are from different countries, but also countries that normally succeed in the Winter Olympics. Additionally, it seems like none of these athletes stayed around for the 2026 Olympics. <a href="https://sports.yahoo.com/article/german-top-speed-skater-pechstein-112113960.html?guccounter=1&amp;guce_referrer=aHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS8&amp;guce_referrer_sig=AQAAAKliQjHFMNXnpxdGmWSCDn2oGlcm1Yjj_7HZXfGwfG6yUQ238Pi15aEchdFs7PNe8OyKhBQUQBciVADb3jKjDpNeWNDbjMjvxE7C0-qEBEXEuS8Ga2SU46Wfybm3L8ZCb8q03rzCM9D6tux28P_lgPjBqkkVoW9X5TtacYN2_P-R">Claudia Pechstein retired in 2025</a> and <a href="https://www.msn.com/en-us/sports/other/switzerland-leaves-44-year-old-ski-jump-great-simon-ammann-off-winter-olympics-team/ar-AA1V02zp">Simon Amman did not make the 2026 Switzerland Olympic team</a>. Lastly, these 6 veterans played a variety of sports. Speed Skating: Claudia Perchstein; Ski Jumping: Janne Anohen, Simon Ammann, Noriaki Kasa; Luge: Albert Demchenko; Cross Country Ski: Siarhei Dalidovich. Having 3 veterans (7+ olympics) in ski jumping might symbolize that it has more opportunities of winning even as an older athlete.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/davidgarmal\.github\.io\/comm3180_S26_Blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>